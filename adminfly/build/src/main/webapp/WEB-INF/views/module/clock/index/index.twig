{% extends '../clock-layout.twig' %}
{% block content %}
    <link rel="stylesheet" href="{{ asset('module/clock/css/clock.css') }}">
    <link rel="stylesheet" href="{{ asset('module/clock/css/theme_' ~ name ~ '.css') }}">
    <style>
        body {
            background-image: url("{{ asset('module/clock/images/' ~ extra.get('values.clock.config.' ~ name ~ '.background')) }}");
        }
    </style>
    <main>
        <article id="clock">
            <div id="clock-hours"></div>:
            <div id="clock-minutes"></div>:
            <div id="clock-seconds"></div>
        </article>
    </main>
    <script>
        const $ = document.getElementById.bind(document);

        function fillZero(number) {
            return (number < 10) ? "0" + number : number;
        }

        function tiktok(number) {
            return (number % 2 == 0) ? "{{ extra.get('values.clock.config.' ~ name ~ '.tiktok.tok') }}" : '{{ extra.get('values.clock.config.' ~ name ~ '.tiktok.tik') }}';
        }

        function showTime() {
            const date = new Date();
            const [h, m, s] = [
                date.getHours(),
                date.getMinutes(),
                date.getSeconds(),
            ];

            $("clock-hours").innerText = fillZero(h);
            $("clock-minutes").innerText = fillZero(m);
            $("clock-seconds").innerText = fillZero(s);

            setTimeout(showTime, 1000);
        }

        showTime();
    </script>
{% endblock %}